{"ast":null,"code":"var _jsxFileName = \"/home/ankit/Projects/ReactJS/react_website/src/Categories.jsx\";\nimport React, { Component } from 'react'; // import {ReactTable} from \"react-table\";\n\nimport Axios from 'axios';\nconst api_url = \"https://gorest.co.in/public-api/\";\nconst authBearer = \"Bearer 133acc5970437f9b6f89cd03b05cddfec5c719201c3614d682b24b7dcb6c9a19\";\nexport default class Categories extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      columns: [],\n      message: 'Loading...',\n      formdata: {\n        name: '',\n        description: ''\n      },\n      editid: 0\n    };\n    this.fillDataFromAPI = this.fillDataFromAPI.bind(this);\n    this.renderTableData = this.renderTableData.bind(this);\n    this.deleteCategory = this.deleteCategory.bind(this);\n    this.addCategory = this.addCategory.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.editCategory = this.editCategory.bind(this);\n    this.fillDataFromAPI();\n  }\n\n  fillDataFromAPI() {\n    var classState = this;\n    Axios.get(api_url + \"categories\").then(function (res) {\n      debugger;\n\n      if (res.status == 200) {\n        classState.setState({\n          data: res.data.data\n        });\n      }\n    }).catch(function (res) {\n      console.log(res);\n    });\n  }\n\n  deleteCategory(e) {\n    debugger;\n    const classState = this;\n    const delteId = e.target.getAttribute(\"deleteid\");\n    Axios.delete(api_url + \"categories/\" + delteId, {\n      headers: {\n        'Authorization': authBearer\n      }\n    }).then(function (res) {\n      debugger;\n\n      if (res.data.code == 204) {\n        alert(\"Deleted Successfully.\");\n        classState.fillDataFromAPI();\n      } else {\n        alert(res.data.data.message);\n      }\n    }).catch(function (res) {\n      debugger;\n      console.log(res);\n    });\n  }\n\n  renderTableData() {\n    let data = /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, \"Loading...\"));\n\n    if (this.state.data.length > 0) {\n      data = \"\";\n    }\n\n    data = this.state.data.map((cat, index) => {\n      const {\n        id,\n        name,\n        description,\n        status\n      } = cat; //destructuring\n\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 19\n        }\n      }, id), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 19\n        }\n      }, description), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 19\n        }\n      }, status ? \"Active\" : \"Deactive\"), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"categoty-action-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        deleteid: id,\n        onClick: this.deleteCategory,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 23\n        }\n      }, \"DELETE\"), \"\\xA0\\xA0-\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n        name: name,\n        des: description,\n        editid: id,\n        onClick: this.editCategory,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 23\n        }\n      }, \"EDIT\")));\n    });\n    return data;\n  }\n\n  addCategory() {\n    debugger;\n    const classState = this;\n    Axios.post(api_url + \"categories\", {\n      \"name\": classState.state.formdata.name,\n      \"description\": classState.state.formdata.description,\n      \"status\": true\n    }, {\n      headers: {\n        'Authorization': authBearer\n      }\n    }).then(function (res) {\n      debugger;\n\n      if (res.data.code == 201) {\n        classState.fillDataFromAPI();\n        alert(\"'\" + res.data.data.name + \"' Category Added Successfully.\");\n      } else if (res.data.code == 422) {\n        alert(res.data.data[0].field + \" \" + res.data.data[0].message);\n      }\n    }).catch(function (res) {\n      debugger;\n      console.log(res);\n    });\n  }\n\n  handleChange(e) {\n    const name = e.target.name;\n    const value = e.target.value;\n    let oldval = this.state.formdata;\n    oldval[name] = value;\n    this.setState({\n      formdata: oldval\n    });\n  }\n\n  editCategory(e) {\n    debugger;\n    const name = e.target.getAttribute(\"name\");\n    const desc = e.target.getAttribute(\"des\");\n    const editId = e.target.getAttribute(\"editid\");\n    this.setState({\n      editid: editId\n    });\n    this.setState({\n      formdata: {\n        name: name,\n        description: desc\n      }\n    });\n  }\n\n  render() {\n    const data = [{\n      age: 26,\n      visits: 100\n    }, {\n      age: 44,\n      visits: 200\n    }];\n    const tableHeader = /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 30\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, \"NAME\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, \"DESCRIPTION\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, \"STATUS\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, \"ACTION\"));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      onClick: this.test,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, \"Categories\"), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.formdata.name,\n      type: \"tetx\",\n      placeholder: \"Category Name\",\n      name: \"name\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }), \"\\xA0\", /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.formdata.description,\n      style: {\n        width: '700px'\n      },\n      type: \"tetx\",\n      placeholder: \"Category Description\",\n      name: \"description\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }), \"\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.addCategory,\n      className: \"categoty-action-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, \"ADD\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      border: \"1\",\n      id: \"cat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, tableHeader, this.renderTableData())));\n  }\n\n} // export default Categories;","map":{"version":3,"sources":["/home/ankit/Projects/ReactJS/react_website/src/Categories.jsx"],"names":["React","Component","Axios","api_url","authBearer","Categories","constructor","props","state","data","columns","message","formdata","name","description","editid","fillDataFromAPI","bind","renderTableData","deleteCategory","addCategory","handleChange","editCategory","classState","get","then","res","status","setState","catch","console","log","e","delteId","target","getAttribute","delete","headers","code","alert","length","map","cat","index","id","post","field","value","oldval","desc","editId","render","age","visits","tableHeader","test","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import {ReactTable} from \"react-table\";\nimport Axios from 'axios';\nconst api_url = \"https://gorest.co.in/public-api/\";\nconst authBearer = \"Bearer 133acc5970437f9b6f89cd03b05cddfec5c719201c3614d682b24b7dcb6c9a19\";\n\nexport default class Categories extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            data : [],\n            columns : [],\n            message : 'Loading...',\n            formdata : {\n                name : '',\n                description : ''\n            },\n            editid : 0\n        };\n\n        this.fillDataFromAPI = this.fillDataFromAPI.bind(this);\n        this.renderTableData = this.renderTableData.bind(this);\n        this.deleteCategory = this.deleteCategory.bind(this);\n        this.addCategory = this.addCategory.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.editCategory = this.editCategory.bind(this);\n\n        this.fillDataFromAPI();\n    };\n\n    fillDataFromAPI(){\n        var classState = this;\n        Axios.get(api_url+\"categories\")\n        .then(function(res){\n            debugger;\n            if(res.status==200){\n                classState.setState({data : res.data.data});\n            }\n        })\n        .catch(function(res){\n            console.log(res);\n        });\n    }\n\n    deleteCategory(e){\n        debugger;\n        const classState = this;\n        const delteId = e.target.getAttribute(\"deleteid\");\n        Axios.delete(api_url+\"categories/\"+delteId,{\n            headers: {\n                'Authorization': authBearer\n            }\n        })\n        .then(function(res){\n            debugger;\n            if(res.data.code==204){\n                alert(\"Deleted Successfully.\");\n                classState.fillDataFromAPI();            \n            }else{\n                alert(res.data.data.message);\n            }\n        })\n        .catch(function(res){\n            debugger;\n            console.log(res);\n        });\n    };\n\n    renderTableData(){\n        let data = (<tr>\n                        <td>Loading...</td>\n                    </tr>);\n        if(this.state.data.length > 0){\n            data = \"\";\n        }            \n        data = this.state.data.map((cat, index) => {\n            const { id, name, description, status} = cat //destructuring\n            return (\n               <tr key={id}>\n                  <td>{id}</td>\n                  <td>{name}</td>\n                  <td>{description}</td>\n                  <td>{status ? \"Active\" : \"Deactive\"}</td>\n                  <td className=\"categoty-action-link\">\n                      <span deleteid={id} onClick={this.deleteCategory}>DELETE</span>\n                      &nbsp;&nbsp;-&nbsp;&nbsp;\n                      <span \n                      name={name}\n                      des={description}\n                      editid={id}\n                      onClick={this.editCategory}>\n                          EDIT\n                        </span>\n                    </td>\n               </tr>\n            )\n         });\n\n        return data;\n    }\n\n    addCategory(){\n        debugger;\n        const classState = this;\n        \n        Axios.post(api_url+\"categories\",{\n            \"name\": classState.state.formdata.name,\n            \"description\": classState.state.formdata.description,\n            \"status\" : true\n        },{\n            headers: {\n                'Authorization': authBearer\n            }\n        }).then(function(res){\n            debugger;\n            if(res.data.code == 201){\n                classState.fillDataFromAPI();\n                alert(\"'\"+res.data.data.name+\"' Category Added Successfully.\");\n            }else if(res.data.code == 422){\n                alert(res.data.data[0].field+\" \"+res.data.data[0].message);\n            }\n        }).catch(function(res){\n            debugger;\n            console.log(res);\n        });\n    }\n\n    handleChange(e){\n        const name = e.target.name;\n        const value = e.target.value;\n        let oldval = this.state.formdata;\n        oldval[name] = value;\n        this.setState({formdata : oldval});\n    }\n\n    editCategory(e){\n        debugger;\n        const name = e.target.getAttribute(\"name\");\n        const desc = e.target.getAttribute(\"des\");\n        const editId = e.target.getAttribute(\"editid\");\n        this.setState({editid : editId});\n        this.setState({formdata : {\n            name : name,\n            description : desc\n        }});\n    }\n\n    render(){\n        const data = [{\n            age: 26,\n            visits: 100\n          },{\n            age: 44,\n            visits: 200\n          }]\n\n        \n        const tableHeader = (<tr>\n            <th>ID</th>\n            <th>NAME</th>\n            <th>DESCRIPTION</th>\n            <th>STATUS</th>\n            <th>ACTION</th>\n        </tr>);\n        \n        \n          \n        return(\n            <div>\n                <h1 onClick={this.test}>Categories</h1>\n                <form>\n                    <input \n                    value={this.state.formdata.name}\n                    type=\"tetx\" placeholder=\"Category Name\"\n                    name=\"name\" onChange={this.handleChange} />\n                    &nbsp;\n                    <input \n                    value={this.state.formdata.description}\n                    style={{width: '700px'}} type=\"tetx\" placeholder=\"Category Description\" \n                    name=\"description\" onChange={this.handleChange} />\n                    &nbsp;\n                    <span onClick={this.addCategory} className=\"categoty-action-link\">ADD</span>\n                </form>\n                <br/>\n                <table border=\"1\" id='cat'>\n                    <tbody>\n                        {tableHeader}\n                        {this.renderTableData()}\n                    </tbody>\n                </table>\n            </div>\n        );\n    };\n    \n}\n\n// export default Categories;"]},"metadata":{},"sourceType":"module"}